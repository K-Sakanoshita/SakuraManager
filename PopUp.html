<form>
	さくら登録
	<input type="hidden" id="osmid"></input>
	<table style="white-space: nowrap; font-size: small;">
		<tr>
			<td>エリア：</td>
			<td colspan="3"><select id="area">
				<option value="たけくらべ広場周辺">たけくらべ広場周辺</option>
				<option value="丸岡温泉 たけくらべ周辺">丸岡温泉 たけくらべ周辺</option>
				<option value="本専寺周辺">本専寺周辺</option>
				<option value="光圓寺周辺">光圓寺周辺</option>
				<option value="ちくちくぼんぼん北側">ちくちくぼんぼん北側</option>
				<option value="ちくちくぼんぼん周辺">ちくちくぼんぼん周辺</option>
				<option value="ちくちくぼんぼん南側">ちくちくぼんぼん南側</option>
			</select></td>
		</tr>
		<tr>
			<td>植樹：</td>
			<td colspan="3"><input type="date" id="planting"></input></td>
		</tr>
		<tr>
			<td>愛称：</td>
			<td colspan="3"><input type="text" id="name" maxlength="40"></input></td>
		</tr>
		<tr>
			<td rowspan="2">写真：</td>
			<td colspan="2"><input type="url" id="picture_url" value="https://"></input></td>
		</tr>
		<tr>
			<td><img src="" width="200px" id="picture_img"></td>
		</tr>
		<tr>
			<td>メモ：</td>
			<td colspan="3"><textarea id="memo" rows="3"></textarea></td>
		</tr>
		<tr>
			<td colspan="4" style="text-align:center;"><button type="button" id="SubmitButton" onclick='PopUpSubmit()'> 上記の内容を登録 </button></td>
		</tr>
	</table>
</form>
<script>

	/* フォームに値をセットするため本体から呼び出される */
	function PopUpFormLoad(json){
		$("#osmid").val(json['OSMID']);
		$("#area").val(json['場所']);
		$("#planting").val(formatDate(new Date(json['植樹日']),"YYYY-MM-DD"));
		$("#name").val(json['愛称']);
		$("#picture_url").val(json['写真アドレス']);
		$("#picture_img").attr('src',json['写真アドレス'])
		$("#memo").val(json['メモ']);
	};

	/* Classの内容を整えて本体の登録関数を呼び出す */
	function PopUpSubmit(){
		let commit = {};
		if (confirm("この内容で登録しますか？")){
			$('#SubmitButton').prop("disabled", true);
			commit['index'] = $('#index').val();
			commit['OSMID'] = $('#osmid').val();
			commit['場所'] = $('#area').val();
			commit['植樹日'] = $('#planting').val().replace(/-/g,"/");
			commit['愛称'] = $('#name').val();
			commit['写真アドレス'] = $('#picture_url').val();
			commit['メモ'] = $('#memo').val();
			PoiData.post(commit).then(function(){
				$('#SubmitButton').prop("disabled", false)
			});
		}
		return;
	}
</script>
